<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CAD Bridge Forms</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="overlay" class="overlay hidden" aria-hidden="true">
      <section class="panel" role="dialog" aria-modal="true" aria-labelledby="emergency-title">
        <header class="panel-header">
          <div class="eyebrow">000 Emergency Intake</div>
          <button id="closeBtn" class="icon-btn" type="button" aria-label="Close">x</button>
        </header>

        <h1 id="emergency-title">Request Immediate Dispatch</h1>
        <p class="subtitle">
          This sends directly to CAD. Your current location and postal are attached automatically.
        </p>

        <form id="emergencyForm" class="form" novalidate>
          <div class="field">
            <label for="titleInput">What Is Happening? <span class="required">*</span></label>
            <input
              id="titleInput"
              type="text"
              maxlength="80"
              placeholder="e.g. Armed robbery with shots fired"
              autocomplete="off"
              required
            />
            <div class="meta-row">
              <span id="titleError" class="error hidden">Title is required.</span>
              <span id="titleCounter" class="counter">0 / 80</span>
            </div>
          </div>

          <div class="field">
            <label for="detailsInput">Reason For Calling <span class="required">*</span></label>
            <textarea
              id="detailsInput"
              maxlength="600"
              placeholder="What is wrong right now, what is urgent, and any key details responders need."
            ></textarea>
            <div class="meta-row">
              <span id="detailsError" class="error hidden">Reason for calling is required.</span>
              <span id="detailsCounter" class="counter">0 / 600</span>
            </div>
          </div>

          <div class="field">
            <div class="dept-header">
              <label>Who Is Required? <span class="required">*</span></label>
              <span class="dept-hint">Select all departments needed on this call</span>
            </div>
            <div id="departmentsEmpty" class="empty-state">
              No department options were provided by CAD.
            </div>
            <div id="departmentsList" class="dept-grid hidden"></div>
            <div id="departmentsError" class="error hidden">Select at least one department.</div>
          </div>

          <footer class="actions">
            <button id="cancelBtn" class="btn btn-ghost" type="button">Cancel</button>
            <button id="submitBtn" class="btn btn-primary" type="submit">Send 000 Call</button>
          </footer>
        </form>
      </section>
    </div>

    <div id="licenseOverlay" class="overlay hidden" aria-hidden="true">
      <section class="panel panel-license" role="dialog" aria-modal="true" aria-labelledby="license-title">
        <header class="panel-header">
          <div class="eyebrow">VicRoads Driver Licence</div>
          <button id="licenseCloseBtn" class="icon-btn" type="button" aria-label="Close">x</button>
        </header>

        <h1 id="license-title">Create Driver Licence Record</h1>
        <p class="subtitle">
          Complete this quick Australian road rules quiz. Score at least 80% to receive your licence.
        </p>
        <div class="portal-brand">
          <img class="portal-logo" src="vicroads-logo.jpg" alt="VicRoads" />
          <div class="portal-brand-text">
            <span class="portal-brand-title">VicRoads Portal</span>
            <span class="portal-brand-subtitle">State of Victoria</span>
          </div>
        </div>

        <form id="licenseForm" class="form" novalidate>
          <input id="licenseNameInput" type="hidden" />
          <input id="licenseDobInput" type="hidden" />
          <input id="licenseGenderInput" type="hidden" />

          <div id="licenseStatusPanel" class="field hidden">
            <label>Licence Status</label>
            <p id="licenseStatusMessage" class="subtitle"></p>
            <div class="actions">
              <button id="licenseRetakePhotoBtn" class="btn btn-ghost" type="button">Retake Photo</button>
            </div>
          </div>

          <div id="licenseQuizPanel" class="field">
            <label>Learner Quiz</label>
            <div id="licenseQuizList" class="form"></div>
          </div>

          <div id="licensePassPanel" class="field hidden">
            <label>Result</label>
            <p id="licensePassMessage" class="subtitle"></p>
            <div class="actions">
              <button id="licenseContinuePhotoBtn" class="btn btn-primary" type="button">Continue To Photo</button>
            </div>
          </div>

          <div id="licenseFormError" class="error hidden"></div>

          <footer class="actions">
            <button id="licenseCancelBtn" class="btn btn-ghost" type="button">Cancel</button>
            <button id="licenseSubmitBtn" class="btn btn-primary" type="submit">Submit Quiz</button>
          </footer>
        </form>
      </section>
    </div>

    <div id="registrationOverlay" class="overlay hidden" aria-hidden="true">
      <section class="panel panel-registration" role="dialog" aria-modal="true" aria-labelledby="registration-title">
        <header class="panel-header">
          <div class="eyebrow">VicRoads Registration</div>
          <button id="registrationCloseBtn" class="icon-btn" type="button" aria-label="Close">x</button>
        </header>

        <h1 id="registration-title">Create Vehicle Registration Record</h1>
        <p class="subtitle">
          Pulls vehicle details from your current driver seat. Expiry is automatically calculated from today based on the selected registration length.
        </p>
        <div class="portal-brand">
          <img class="portal-logo" src="vicroads-logo.jpg" alt="VicRoads" />
          <div class="portal-brand-text">
            <span class="portal-brand-title">VicRoads Rego Portal</span>
            <span class="portal-brand-subtitle">State of Victoria</span>
          </div>
        </div>

        <form id="registrationForm" class="form" novalidate>
          <div class="inline-grid two-col">
            <div class="field">
              <label for="regoOwnerInput">Owner Name <span class="required">*</span></label>
              <input id="regoOwnerInput" type="text" maxlength="80" autocomplete="off" required readonly />
            </div>
            <div class="field">
              <label for="regoPlateInput">Plate <span class="required">*</span></label>
              <input id="regoPlateInput" type="text" maxlength="15" autocomplete="off" required readonly />
            </div>
          </div>

          <div class="inline-grid two-col">
            <div class="field">
              <label for="regoModelInput">Vehicle Model <span class="required">*</span></label>
              <input id="regoModelInput" type="text" maxlength="80" autocomplete="off" required readonly />
            </div>
            <div class="field">
              <label for="regoColourInput">Vehicle Colour</label>
              <input id="regoColourInput" type="text" maxlength="80" autocomplete="off" readonly />
            </div>
          </div>

          <div class="field">
            <label>Registration Length</label>
            <div id="regoDurationList" class="chip-grid"></div>
          </div>

          <div id="registrationFormError" class="error hidden"></div>

          <footer class="actions">
            <button id="registrationCancelBtn" class="btn btn-ghost" type="button">Cancel</button>
            <button id="registrationSubmitBtn" class="btn btn-primary" type="submit">Save Registration</button>
          </footer>
        </form>
      </section>
    </div>

    <div id="idCardMount"></div>

    <div id="miniCadPopup" class="minicad hidden">
      <header class="minicad-header">
        <span id="miniCadCallIndex" class="minicad-index">1/1</span>
        <span class="minicad-brand">Mini-CAD</span>
        <div class="minicad-header-btns">
          <button id="miniCadHideBtn" class="minicad-icon-btn" type="button" title="Hide (PageUp)">x</button>
        </div>
      </header>

      <div class="minicad-body">
        <section id="miniCadClosestPrompt" class="minicad-closest hidden">
          <div class="minicad-closest-header">
            <span id="miniCadClosestLabel" class="minicad-closest-label">Closest Unit Offer</span>
            <span id="miniCadClosestTimer" class="minicad-closest-timer"></span>
          </div>
          <div id="miniCadClosestTitle" class="minicad-closest-title"></div>
          <div id="miniCadClosestMeta" class="minicad-closest-meta"></div>
          <div id="miniCadClosestLocation" class="minicad-closest-location"></div>
          <div class="minicad-closest-actions">
            <button id="miniCadClosestAttach" class="minicad-nav-btn minicad-closest-attach" type="button">Attach</button>
            <button id="miniCadClosestDecline" class="minicad-nav-btn minicad-closest-decline" type="button">Decline</button>
          </div>
        </section>

        <div id="miniCadCallView">
          <div class="minicad-call-header">
            <div id="miniCadTitle" class="minicad-title"></div>
            <div id="miniCadCaller" class="minicad-caller"></div>
          </div>
          <div id="miniCadLocation" class="minicad-location"></div>
          <div class="minicad-badges">
            <span id="miniCadPostal" class="minicad-postal"></span>
          </div>

          <nav class="minicad-nav">
            <button id="miniCadDetach" class="minicad-nav-btn" type="button">Detach (End)</button>
          </nav>

          <section class="minicad-section">
            <h4 class="minicad-section-label">REASON FOR CALL:</h4>
            <div id="miniCadDescription" class="minicad-description"></div>
          </section>
        </div>
      </div>
    </div>

    <div id="mugshotBackdrop" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:#fff;z-index:0;"></div>

    <div id="app"></div>

    <script src="app.js"></script>
  </body>
</html>
