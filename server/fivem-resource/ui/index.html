<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CAD Bridge Forms</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="cad_radio.css" />
  </head>
  <body>
    <div id="overlay" class="overlay hidden" aria-hidden="true">
      <section class="panel" role="dialog" aria-modal="true" aria-labelledby="emergency-title">
        <header class="panel-header">
          <div class="eyebrow">000 Emergency Intake</div>
          <button id="closeBtn" class="icon-btn" type="button" aria-label="Close">x</button>
        </header>

        <h1 id="emergency-title">Request Immediate Dispatch</h1>
        <p class="subtitle">
          This sends directly to CAD. Your current location and postal are attached automatically.
        </p>

        <form id="emergencyForm" class="form" novalidate>
          <div class="field">
            <label for="titleInput">Title <span class="required">*</span></label>
            <input
              id="titleInput"
              type="text"
              maxlength="80"
              placeholder="e.g. Armed robbery with shots fired"
              autocomplete="off"
              required
            />
            <div class="meta-row">
              <span id="titleError" class="error hidden">Title is required.</span>
              <span id="titleCounter" class="counter">0 / 80</span>
            </div>
          </div>

          <div class="field">
            <label for="detailsInput">Details</label>
            <textarea
              id="detailsInput"
              maxlength="600"
              placeholder="Suspects, vehicle, injuries, direction of travel, any immediate hazards..."
            ></textarea>
            <div class="meta-row">
              <span></span>
              <span id="detailsCounter" class="counter">0 / 600</span>
            </div>
          </div>

          <div class="field">
            <div class="dept-header">
              <label>Departments Required</label>
              <span class="dept-hint">Optional, select all that apply</span>
            </div>
            <div id="departmentsEmpty" class="empty-state">
              No department options were provided by CAD.
            </div>
            <div id="departmentsList" class="dept-grid hidden"></div>
          </div>

          <footer class="actions">
            <button id="cancelBtn" class="btn btn-ghost" type="button">Cancel</button>
            <button id="submitBtn" class="btn btn-primary" type="submit">Send 000 Call</button>
          </footer>
        </form>
      </section>
    </div>

    <div id="licenseOverlay" class="overlay hidden" aria-hidden="true">
      <section class="panel panel-license" role="dialog" aria-modal="true" aria-labelledby="license-title">
        <header class="panel-header">
          <div class="eyebrow">VicRoads Driver Licence</div>
          <button id="licenseCloseBtn" class="icon-btn" type="button" aria-label="Close">x</button>
        </header>

        <h1 id="license-title">Create Driver Licence Record</h1>
        <p class="subtitle">
          Record is stored in CAD with status controls: valid, suspended, disqualified, and expired.
        </p>

        <form id="licenseForm" class="form" novalidate>
          <div class="field">
            <label for="licenseNameInput">Character Name <span class="required">*</span></label>
            <input id="licenseNameInput" type="text" maxlength="80" autocomplete="off" required readonly />
          </div>

          <div class="inline-grid two-col">
            <div class="field">
              <label for="licenseDobInput">Date Of Birth <span class="required">*</span></label>
              <input id="licenseDobInput" type="date" required readonly />
            </div>
            <div class="field">
              <label for="licenseGenderInput">Gender <span class="required">*</span></label>
              <input id="licenseGenderInput" type="text" maxlength="30" required readonly />
            </div>
          </div>

          <div class="field">
            <label>Licence Classes <span class="required">*</span></label>
            <div id="licenseClassEmpty" class="empty-state">No class options configured.</div>
            <div id="licenseClassList" class="chip-grid hidden"></div>
          </div>

          <div class="field">
            <label>Licence Length</label>
            <div id="licenseDurationList" class="chip-grid"></div>
          </div>

          <div class="field">
            <label for="licenseConditionsInput">Conditions (Comma Separated)</label>
            <input id="licenseConditionsInput" type="text" maxlength="220" autocomplete="off" placeholder="e.g. Corrective lenses, Automatic only" />
          </div>

          <div id="licenseFormError" class="error hidden"></div>

          <footer class="actions">
            <button id="licenseCancelBtn" class="btn btn-ghost" type="button">Cancel</button>
            <button id="licenseSubmitBtn" class="btn btn-primary" type="submit">Save Licence</button>
          </footer>
        </form>
      </section>
    </div>

    <div id="registrationOverlay" class="overlay hidden" aria-hidden="true">
      <section class="panel panel-registration" role="dialog" aria-modal="true" aria-labelledby="registration-title">
        <header class="panel-header">
          <div class="eyebrow">VicRoads Registration</div>
          <button id="registrationCloseBtn" class="icon-btn" type="button" aria-label="Close">x</button>
        </header>

        <h1 id="registration-title">Create Vehicle Registration Record</h1>
        <p class="subtitle">
          Pulls vehicle details from your current driver seat. Expiry is automatically calculated from today based on the selected registration length.
        </p>

        <form id="registrationForm" class="form" novalidate>
          <div class="inline-grid two-col">
            <div class="field">
              <label for="regoOwnerInput">Owner Name <span class="required">*</span></label>
              <input id="regoOwnerInput" type="text" maxlength="80" autocomplete="off" required readonly />
            </div>
            <div class="field">
              <label for="regoPlateInput">Plate <span class="required">*</span></label>
              <input id="regoPlateInput" type="text" maxlength="15" autocomplete="off" required readonly />
            </div>
          </div>

          <div class="inline-grid two-col">
            <div class="field">
              <label for="regoModelInput">Vehicle Model <span class="required">*</span></label>
              <input id="regoModelInput" type="text" maxlength="80" autocomplete="off" required readonly />
            </div>
            <div class="field">
              <label for="regoColourInput">Vehicle Colour</label>
              <input id="regoColourInput" type="text" maxlength="80" autocomplete="off" readonly />
            </div>
          </div>

          <div class="field">
            <label>Registration Length</label>
            <div id="regoDurationList" class="chip-grid"></div>
          </div>

          <div id="registrationFormError" class="error hidden"></div>

          <footer class="actions">
            <button id="registrationCancelBtn" class="btn btn-ghost" type="button">Cancel</button>
            <button id="registrationSubmitBtn" class="btn btn-primary" type="submit">Save Registration</button>
          </footer>
        </form>
      </section>
    </div>

    <div id="idCardOverlay" class="id-card-overlay hidden" aria-hidden="true">
      <section class="id-card" role="dialog" aria-modal="false" aria-labelledby="idCardTitle">
        <header class="id-card-header">
          <div class="id-card-eyebrow">VicRoads Photo Licence</div>
          <button id="idCardCloseBtn" class="icon-btn" type="button" aria-label="Close">x</button>
        </header>

        <h2 id="idCardTitle" class="id-card-title">Driver Licence</h2>
        <div id="idCardViewerNote" class="id-card-note"></div>

        <div class="id-card-body">
          <img id="idCardPhoto" class="id-card-photo" alt="Licence photo" />

          <div class="id-card-fields">
            <div class="id-row"><span class="id-label">Name</span><span id="idCardName" class="id-value"></span></div>
            <div class="id-row"><span class="id-label">DOB</span><span id="idCardDob" class="id-value"></span></div>
            <div class="id-row"><span class="id-label">Gender</span><span id="idCardGender" class="id-value"></span></div>
            <div class="id-row"><span class="id-label">Licence No.</span><span id="idCardNumber" class="id-value"></span></div>
            <div class="id-row"><span class="id-label">Class</span><span id="idCardClasses" class="id-value"></span></div>
            <div class="id-row"><span class="id-label">Status</span><span id="idCardStatus" class="id-value"></span></div>
            <div class="id-row"><span class="id-label">Expiry</span><span id="idCardExpiry" class="id-value"></span></div>
            <div class="id-row"><span class="id-label">Conditions</span><span id="idCardConditions" class="id-value"></span></div>
          </div>
        </div>

        <div class="id-card-footer">Press <strong>PGDN</strong> to close</div>
      </section>
    </div>

    <div id="app"></div>

    <script type="module" src="cad_radio.js"></script>
    <script src="app.js"></script>
  </body>
</html>